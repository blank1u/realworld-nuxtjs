(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{179:function(e,t,r){"use strict";r.r(t);r(29);var n=r(3),o=(r(31),r(161)),l=r.n(o).a.create({baseURL:"https://conduit.productionready.io"}),c=function(data){return l.post("/api/users",data)},m=r(178),d={middleware:"notAuth",name:"login",computed:{isLogin:function(){return"Login"===this.$route.name}},data:function(){return{user:{email:"",password:"",username:""},errors:{}}},methods:{handelSubmit:function(){this.isLogin?this.login():this.users()},login:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete e.user.username,r={user:e.user},t.prev=2,t.next=5,data=r,l.post("/api/users/login",data);case 5:n=t.sent,o=n.data.user,e.$store.commit("setUser",o),m.set("user",o),e.$router.push("/"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),e.errors=t.t0.response.data.errors;case 15:case"end":return t.stop()}var data}),t,null,[[2,12]])})))()},users:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={user:e.user},t.prev=1,t.next=4,c(r);case 4:n=t.sent,n.data,e.$router.push("/login"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.errors=t.t0.response.data.errors;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},v=r(19),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"auth-page"},[r("div",{staticClass:"container page"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 offset-md-3 col-xs-12"},[r("h1",{staticClass:"text-xs-center"},[e._v(e._s(e.isLogin?"Sign in":"Sign up"))]),e._v(" "),r("p",{staticClass:"text-xs-center"},[e.isLogin?r("nuxt-link",{attrs:{to:"/register"}},[e._v("Need an account?")]):r("nuxt-link",{attrs:{to:"/login"}},[e._v("Have an account?")])],1),e._v(" "),r("ul",{staticClass:"error-messages"},[e._l(e.errors,(function(t,n){return e._l(t,(function(t){return r("li",[e._v(e._s(n)+e._s(t))])}))}))],2),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.handelSubmit(t)}}},[e.isLogin?e._e():r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticClass:"form-control form-control-lg",attrs:{required:"",type:"text",placeholder:"Your Name"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}})]),e._v(" "),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control form-control-lg",attrs:{type:"email",placeholder:"Email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),e._v(" "),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control form-control-lg",attrs:{minlength:"8",required:"",type:"password",placeholder:"Password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),e._v(" "),r("button",{staticClass:"btn btn-lg btn-primary pull-xs-right"},[e._v("\n                        "+e._s(e.isLogin?"Sign in":"Sign up")+"\n                    ")])])])])])])}),[],!1,null,"6c233807",null);t.default=component.exports}}]);